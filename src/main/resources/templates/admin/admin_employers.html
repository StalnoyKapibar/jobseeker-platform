<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layouts/adminlayouts" th:with="side='empl'">
<head>
</head>

<body>
<div class="container-fluid" layout:fragment="content">
    <br/>
    <div class="row">
        <h2>Все работодатели</h2>
    </div>
    <br>
    <div class="row">
        <div class="col-2">
            <form class="form-inline">
                <div class="form-group">
                    <label for="sorBy" style="padding-right: 10px;"> Sort by </label>
                    <select id="sorBy" class="browser-default custom-select">
                        <option value="DESC">Last visit</option>
                        <option value="ASC">First visit</option>
                    </select>
                </div>
            </form>
        </div>
        <div class="col-8"></div>
        <div class="col-2" style="padding-right: 0">
            <form class="form-inline">
                <div class="form-group">
                    <label for="viewBy" style="padding-right: 10px;">View by</label>
                    <select id="viewBy" class="browser-default custom-select">
                        <option value="10">10</option>
                        <option value="5">5</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                </div>
            </form>
        </div>

        <br>
    </div>
    <br>
    <div class="row">
        <div class="table-responsive">
            <table id="employerTable" class="table table-striped table-sm table-bordered sort-order"
                   cellspacing="0"
                   width="100%">
                <thead align="center">
                <tr>
                    <th>Id</th>
                    <th>Enabled</th>
                    <th>Email</th>
                    <th>Last Visit</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody align="center">
                <tr th:each="employerUser : ${employerUsers}">
                    <td th:text="${employerUser.id}"></td>
                    <td><div class="custom-control custom-switch" th:if="${employerUser.confirm}">
                        <input type="checkbox" class="custom-control-input chkbx_enabled"
                               th:attr="data-id=${employerUser.id}"
                               th:checked="${employerUser.enabled}?'true':'false'"
                               th:id="'chkbx_enabled_'+${employerUser.id}">
                        <label class="custom-control-label" th:for="'chkbx_enabled_'+${employerUser.id}"/>
                    </div><div class="alert alert-danger" style="margin-bottom : 0;" th:if="${!employerUser.confirm}">
                        <b>Не подтвержден</b></div></td>
                    <td th:text="${employerUser.email}"></td>
                    <td th:text="${#temporals.format(employerUser.date, 'dd MMMM yyyy HH:mm')}"></td>
                    <td>
                        <button th:onclick="'editEmployer(\'' + ${employerUser.id} + '\');'" type="button"
                                class="btn btn-primary">Edit
                            Employer
                        </button>
                        <button th:onclick="'deleteEmployer(\'' + ${employerUser.id} + '\');'" type="button"
                                class="btn btn-primary">
                            Delete Employer
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="alert_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header alert alert-success" style="margin-bottom : 0;">
                        <h5 class="modal-title" id="exampleModalCenterTitle">Операция выполнена!</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Modal -->
    </div>

    <nav aria-label="Pagination" th:if="${employerUsers.totalPages gt 0}">
        <ul id="pagList" class="pagination justify-content-right font-weight-bold">
            <li class="page-item" th:classappend="${employerUsers.number eq 0} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/admin/employers?page={id}(id=${employerUsers.number lt 2 ? 1 : employerUsers.number})}"
                   aria-label="Previous" title="Previous Page" data-toggle="tooltip">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item" th:classappend="${i eq employerUsers.number + 1} ? 'active'"
                th:each="i : ${#numbers.sequence( 1, employerUsers.totalPages, 1)}">
                <a class="page-link" th:href="@{/admin/employers?page={id}(id=${i})}" th:text="${i}"
                   th:title="${'Page '+ i}" data-toggle="tooltip"></a>
            </li>
            <li class="page-item"
                th:classappend="${employerUsers.number + 1 eq employerUsers.totalPages} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/admin/employers?page={id}(id=${employerUsers.number + 2})}"
                   aria-label="Next" title="Next Page" data-toggle="tooltip">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>
<div class="container-fluid" layout:fragment="content-script">
    <script src="/js/admin/admin_employers.js"></script>
</div>
</body>
</html>