<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layouts/adminlayouts" th:with="side='seek'">
<head>
</head>
<body>
<div class="container-fluid" layout:fragment="content">
    <br/>
    <div class="row">
        <h2>Все соискатели</h2>
    </div>
    <br>
    <div class="row">
        <div class="col-2">
            <form class="form-inline">
                <div class="form-group">
                    <label for="sorBy" style="padding-right: 10px;"> Sort by </label>
                    <select id="sorBy" class="browser-default custom-select">
                        <option value="DESC">Last visit</option>
                        <option value="ASC">First visit</option>
                    </select>
                </div>
            </form>
        </div>
        <div class="col-8"></div>
        <div class="col-2" style="padding-right: 0">
            <form class="form-inline">
                <div class="form-group">
                    <label for="viewBy" style="padding-right: 10px;">View by</label>
                    <select id="viewBy" class="browser-default custom-select">
                        <option value="10">10</option>
                        <option value="5">5</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                </div>
            </form>
        </div>

        <br>
    </div>
    <br>
    <div class="row">
        <div class="table-responsive">
            <table id="seekerTable" class="table table-striped table-sm table-bordered sort-order"
                   cellspacing="0"
                   width="100%">
                <thead align="center">
                <tr>
                    <th>Id</th>
                    <th>Enabled</th>
                    <th>Email</th>
                    <th>Last Visit</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody align="center">
                <tr th:each="seekerUser : ${seekerUsers}">
                    <td th:text="${seekerUser.id}"></td>
                    <td>
                        <div th:if="${seekerUser.confirm}" th:insert="fragments/adminfragments :: admin_user_button(user=${seekerUser})"></div>
                        <div class="alert alert-danger" style="margin-bottom : 0;" th:if="${!seekerUser.confirm}">
                            Не подтвержден<sup><b title="Пользователь не завершил регистрацию.&#13; Не подтвержден по электронной почте"> (?) </b></sup></div>
                    </td>
                    <td th:text="${seekerUser.email}"></td>
                    <td th:text="${#temporals.format(seekerUser.date, 'dd MMMM yyyy HH:mm')}"></td>
                    <td>
                        <button th:onclick="'editSeeker(\'' + ${seekerUser.id} + '\');'" type="button"
                                class="btn btn-primary">Edit
                            Seeker
                        </button>
                        <button th:onclick="'deleteSeekerUserById(\'' + ${seekerUser.id} + '\');'" type="button"
                                class="btn btn-primary">
                            Delete Seeker
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <!-- Modal -->
        <div th:replace="fragments/adminfragments :: admin_modal_success_operation_window"></div>
        <!-- /Modal -->
    </div>

    <nav aria-label="Pagination" th:if="${seekerUsers.totalPages gt 0}">
        <ul id="pagList" class="pagination justify-content-right font-weight-bold">
            <li class="page-item" th:classappend="${seekerUsers.number eq 0} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/admin/seekers?page={id}(id=${seekerUsers.number lt 2 ? 1 : seekerUsers.number})}"
                   aria-label="Previous" title="Previous Page" data-toggle="tooltip">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item" th:classappend="${i eq seekerUsers.number + 1} ? 'active'"
                th:each="i : ${#numbers.sequence( 1, seekerUsers.totalPages, 1)}">
                <a class="page-link" th:href="@{/admin/seekers?page={id}(id=${i})}" th:text="${i}"
                   th:title="${'Page '+ i}" data-toggle="tooltip"></a>
            </li>
            <li class="page-item" th:classappend="${seekerUsers.number + 1 eq seekerUsers.totalPages} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/admin/seekers?page={id}(id=${seekerUsers.number + 2})}"
                   aria-label="Next" title="Next Page" data-toggle="tooltip">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>

<div class="container-fluid" layout:fragment="content-script">
    <script src="/js/admin.js"></script>
    <script src="/js/admin/admin_seekers.js"></script>
</div>
</body>
</html>