<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" lang="en">
<head>
    <th:block th:include="fragments :: head"></th:block>
    <meta charset="UTF-8">
    <title>Employer's profile</title>
    <script type="text/javascript" src="/js/employer.js"></script>
    <script type="text/javascript" src="/js/star-rating.min.js"></script>
    <link href="/css/star-rating.min.css" th:href="@{/css/star-rating.min.css}" rel="stylesheet"/>
</head>
<body>
<th:block th:include="fragments :: nav"></th:block>

<div id="eProfileDiv" class="container-fluid">
    <br/>
    <br/>
    <div class="row">
        <div class="col-lg-3">
        </div>
        <div class="col-lg-3">
            <h1><span th:text="${eprofile.companyName}"></span></h1>
            <h2><a th:href="@{'http://' + ${eprofile.website}}" th:text="${eprofile.website}"></a></h2>
        </div>
        <div class="col-lg-3" align="center">
            <img th:src="@{'data:image/png;base64,' + ${logoimg}}" class="img-rounded" alt="Logo of company">
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3">
        </div>
        <div class="col-lg-3">
            <span>О нас:</span><br/>
            <div class="well well-sm">
                <span th:text="${eprofile.description}"></span>
            </div>
        </div>
        <div class="col-lg-3">
            <span>Наши вакансии:</span><br/>
            <div class="list-group">
                <a th:each="vacancy, index: ${eprofile.vacancies}" class="list-group-item" th:text="${vacancy.headline}"
                   data-toggle="modal" data-target="#vacancyModal" th:onclick="'showVacancy('+${vacancy.id}+')'"></a>
            </div>
        </div>
    </div>
    <div sec:authorize="hasRole('ROLE_EMPLOYER')">
        <div class="row">
            <div class="col-lg-3">
            </div>
            <div class="col-lg-3">
                <h5><span>Отзывы о компании: </span>
                    <span th:text="${eprofile.getAverageRating()}"></span>
                    <input id="input-id" name="input-name" type="number" class="rating" min=1 max=10 step=2 data-size="lg" data-rtl="true">
                </h5>
                <div th:if="${eprofile.reviews==null and eprofile.reviews.empty}">
                    <p>Нет отзывов</p>
                </div>
                <div id="carousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        <div class="item active" th:each="reviews, index: ${eprofile.reviews}">
                            <a th:href="@{'/seeker/' + ${reviews.seekerProfile.id}}"
                               th:text="${reviews.seekerProfile.name}"></a>
                            <span th:text="${reviews.evaluation}"></span>

                            <p th:text="${reviews.reviews}"></p>
                        </div>
                    </div>
                </div>
                <div>
                    <button type="button" class="btn btn-primary btn-sm" data-toggle="modal"
                            data-target="#reviewsModal">
                        Оставить отзыв
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="reviewsModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Оставте свой отзыв</h4>
            </div>
            <div class="form-group">
                <label for="exampleFormControlTextarea2"></label>
                <textarea class="form-control rounded-0" id="exampleFormControlTextarea2" rows="3"></textarea>
            </div>
                <div class="star-rating">
                    <span class="fa fa-star-o" data-rating="1" checked></span>
                    <span class="fa fa-star-o" data-rating="2"></span>
                    <span class="fa fa-star-o" data-rating="3"></span>
                    <span class="fa fa-star-o" data-rating="4"></span>
                    <span class="fa fa-star-o" data-rating="5"></span>
                    <input type="hidden" name="whatever1" class="rating-value" value="3.0">
                </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Отмена</button>
                <button type="button" class="btn btn-primary">Сохранить</button>
            </div>
        </div>
    </div>
</div>

<!-- vacancyModal -->
<div id="vacancyModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h2 class="modal-title" th:text="'Вакансия в компании ' + ${eprofile.companyName}"></h2>
            </div>
            <div class="modal-body">
                <h3><span id="VMTags"></span><br></h3>
                <h3><span id="VMHeadline"></span><br/></h3>
                <span id="VMCity"></span>
                <span id="VMRemote"> (Удаленная работа)</span><br/>
                <span id="VMSalary"></span><br/>
                <div class="well well-sm">
                    <span id="VMDescription"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>