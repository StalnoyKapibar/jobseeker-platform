<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/commonlayouts}"
      lang="en">
<head>
    <title>Seeker Chats</title>
    <script type="text/javascript" th:src="@{/js/seeker_chats.js}"></script>
    <script type="text/javascript" th:src="@{/js/date_status_format.js}"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body>
<div layout:fragment="content">
    <!-- Sidebar -->
    <div class="w3-sidebar w3-bar-block w3-card" style="width:17%;right:0;">
        <h3 class="w3-bar-item">Menu</h3>
        <a href="#" class="w3-bar-item w3-button"><b>Чаты по вакансиям</b></a>
        <th:block th:each="chat : ${chats}">
        <div th:if="${chat.topic.getTypeName()=='Вакансия'}">
            <a th:href="@{/private_chat/{id}(id=${chat.id})}" class="w3-bar-item w3-button"> <span th:text="${chat.chatMembers[1].profile.fullName}"></span></a>
        </div>
        </th:block>
        <a href="#" class="w3-bar-item w3-button"><b>Чаты по резюме</b></a>
        <th:block th:each="chat : ${chats}">
            <div th:if="${chat.topic.getTypeName()=='Резюме'}">
                <a th:href="@{/private_chat/{id}(id=${chat.id})}" class="w3-bar-item w3-button"> <span th:text="${chat.chatMembers[0].profile.fullName}"></span></a>
            </div>
        </th:block>
    </div>

    <!-- Page Content -->
    <div style="margin-right:17%">

    <div class="container-fluid">
        <div class="row" style="height: 40px"></div>
        <div class="row">
            <div class="col-sm-3"></div>
            <div class="col-sm-6" align="center" style="color: #7295B1">
                <input type="hidden" id="seekerProfileId" th:value="${seekerProfileId}">
                <div class="list-group">
                    <th:block th:each="chat : ${chats}">
                        <a th:href="@{/private_chat/{id}(id=${chat.id})}"
                           class="list-group-item list-group-item-action chatInfo">
                            <th:block th:each="member :${chat.chatMembers}">
                                <div th:unless="${member.profile.id} eq ${seekerProfileId}">
                                    <div class="chatImageInfo">
                                        <img class="rounded-circle chatMemberPhoto"
                                             th:src="@{'data:image/png;base64,' + ${member.profile.encoderPhoto}}"
                                             name="photo" alt="" style="height: 60px;width: 60px">
                                    </div>
                                    <div class="chatMemberName">
                                        <span th:text="${member.profile.fullName}"></span>
                                    </div>
                                </div>
                            </th:block>
                            <div class="chatMessageInfo" th:id="'chatMessageData_' + ${chat.id}"></div>
                        </a>
                    </th:block>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</body>
</html>